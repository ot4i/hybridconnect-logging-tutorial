<!DOCTYPE html>
<html class="no-js" lang="en">
 
	
<!-- header::Start -->
	<head>
		<!-- Use Internet Explorer 9 Standards mode for Eclipse Browser Control - https://www.eclipse.org/swt/faq.php#browsernativeie and https://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx -->
  		<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
		
		<!-- Next 2 http=equiv headers required to disable caching the Eclipse Browser Widget -->
		<meta http-equiv="Pragma" content="no-cache">
  		<meta http-equiv="Expires" content="-1">

		<meta charset="UTF-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<meta name="copyright" content="Copyright IBM Corporation 2014" />
		<meta name="abstract" content="IBM Integration Bus V10 Tutorial">
		<meta name="author" content="IBM">
		<meta name="description" content="IBM Integration Bus V10 Tutorial">
		<meta name="keywords" content="keywords" > 
		<meta name="robots" content="index,follow">
		<meta name="source" content="IBM Integration Bus V10 Tutorial" /> 
		
		<title>IBM Integration Bus V10 Tutorial</title>

    	<link rel="stylesheet" href="http://ot4i.github.io/iib-tutorials/css/main.css" />
		<link rel="stylesheet" href="http://ot4i.github.io/iib-tutorials/css/app.css" />
    	
		<script src="http://ot4i.github.io/iib-tutorials/js/json2.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/js2java.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/js2java_steps.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/vendor/modernizr.js"></script>
	</head>
<!-- header::End -->
<!-- body::Start -->
		<body>
  	<!-- body content here -->
	<div class="row">
	  <div class="small-12 medium-12 large-12 columns">
	    <p> </p>
	  </div>
	</div>
	<div class="row">
	  <div class="small-9 medium-9 large-9 columns">
	    <h4 class="title">Using Bluemix Kibana dashboards to view IBM Integration Bus Logs <action><button class="small radius button" tabindex="0" id="stepsViewDetails" onclick="viewDetails()"> View Details</button> </action></h4>
	  </div>
	  <div class="small-3 medium-3 large-3 columns">
		<a href="javascript:;" onclick="openHelpSystem('/com.ibm.etools.msgbroker.helphome.doc/help_home_msgbroker.htm')" class="small right helplink">IBM Knowledge Center</a> 
	  </div>
	</div> 
	<hr>
	<div class="row">
		<div class="small-10 medium-10 large-10 columns">
		<h5> Learn how to use a Kibana Dashboard on Bluemix to get a centralized view of IBM Integration Bus Logs. </h5>
		</div>
		<div class="small-2 medium-2 large-2 columns">
			<button class="small radius button right" tabindex="0" id="backToGallery" onclick="backToGallery()"> Back To Gallery
			</button>
		</div>
	</div>
	<div class="row">          
		  <div class="small-12 medium-12 large-12 columns">
			<ul class="tabs vertical"> 
				<li class="tab-title tab-title-small active">
				  <a href="javascript:;" onclick="show('panel21')">Prepare</a> 
				</li>
				<li class="tab-title tab-title-small">
				  <a href="javascript:;" onclick="show('panel31')">Run</a> 
				</li>
				<li class="tab-title tab-title-small">
				  <a href="javascript:;" onclick="show('panel41')">Extend</a> 
				</li>
			</ul>
			<!-- editing -->
			<div class="tabs-content panel-thin-blue vertical"> 
		    	<div class="content active" id="panel21">
		    		
		    		<div class="small-10 medium-10 large-10 columns divider">
					
				      	<div class="row content-details">
					      	<h4></h4>
					        
						    
								<p> <h4>Configure IBM Integration Bus to send Logs to Kibana in Bluemix</h4> </p>
								
								
									
									<ol>
									
									
										<li> Configure your integration server to send its log events to Bluemix:
										
										
											
											<ol>
											
												
													<li> Open the IBM Integration Console window and type the following commands:</li>
												
													<li> <code>mqsistop <b>TESTNODE_userid</b></code> where <b>TESTNODE_userid</b> is the IIB node name</li>
												
													<li> <code>mqsichangebluemixreporting <b>TESTNODE_userid</b> -g -l active -r <b>us-south</b> -o <b>a.user@comp.com</b> -a <b>dev</b> -u <b>joe.bloggs@company.com</b> -p <b>password123</b> -d</code><br>where<br><b>us-south</b> is your Bluemix region (either us-south or eu-gb)<br><b>dev</b> is your Bluemix organization<br><b>joe.bloggs@company.com</b> is your Bluemix userid<br><b>password123</b> is your Bluemix password</li>
												
													<li> <code>mqsistart <b>TESTNODE_userid</b></code> where <b>TESTNODE_userid</b> is the IIB node name</li>
												
											
											</ol>
											
										
										</li>
									
									
									</ol>
									
								
							
								<p> <h4>Import the provided test application into your workspace</h4> </p>
								
								
									
									<ol>
									
									
										<li> When you click Import, the <b>LogMessages</b> Application will be created in your workspace.
										
										</li>
									
										<li> The <b>LogMessages</b> application also contains a message flow named <b>LogMessages</b> which has a <b>Compute</b> node which logs different types of messages into the system log and also a <b>Trace</b> node for recording the logical tree structure in the log at the end of the flow. The execution of this message flow will be used as a way to create data for us to view in the Kibana dashboard.
										
										</li>
									
									
									</ol>
									
								
							
						</div>
						
						<div class="row content-details">
							<h4>Find out more</h4>
							<ul>
							
								
																
								<li> <a href="javascript:;" onclick="openHelpSystem('/com.ibm.etools.mft.doc/bz91180_.htm')" title="Knowledge Center link to Reporting logging information to a Logmet service in IBM Bluemix and displaying it in a Kibana dashboard">Reporting logging information to a Logmet service in IBM Bluemix and displaying it in a Kibana dashboard</a> </li>
							   	
							
							</ul>
						</div>
						
					</div>
					
					<div class="small-2 medium-2 large-2 columns">
					
					
					<h4 class="tkaction"><a href="javascript:;" onclick="importArtifacts(); openResource('MainFlow')"> Import <img class="icon-image" src="http://ot4i.github.io/iib-tutorials/images/icons/ibmdesign/back-right-previous_128-orange.png"></a></h4>
										
				    </div>
					
		    	</div>
		    	<div class="content" id="panel31">
					
					<div class="small-12 medium-12 large-12 columns">
					
						<div class="row content-details">
						  	<h4></h4>
						    
						    
								<p> <h4>Explore the IBM Integration Bus Kibana dashboard</h4> </p>
								
								
									
									<ol>
									
									
										<li> When following the Prepare instructions, the <code>mqsichangebluemixreporting</code> command was executed using the <b>-d</b> option was used which automatically publishes the IBM Integration Bus Kibana dashboard so that it is ready for use.
										
										</li>
									
										<li> Open a web browser window to the dashboard at: https:&#x2F;&#x2F;logmet.ng.bluemix.net&#x2F;app&#x2F;#&#x2F;kibana4&#x2F;dashboard
										
										</li>
									
										<li> Click the <b>Load Saved Dashboard</b> icon (which looks like an open folder) on the right of the screen.
										
										</li>
									
										<li> Under the <b>Dashboard Filter</b> entry field, select <b>IBM Integration Bus Dashboard</b>, and this will open the imported dashboard containing some predefined visuals.
										
										</li>
									
										<li> At this stage the visuals will probably be displaying the message <b>No results found</b>, which suggests that IIB has not yet sent any log entries in to the dashboard.
										
										</li>
									
										<li> try changing the time filter (clock icon on top right) to a larger value.
										
										</li>
									
									
									</ol>
									
								
							
								<p> <h4>Generate some log entries to populate the dashboard</h4> </p>
								
								
									
									<ol>
									
									
										<li> Open the <b>LogMessages</b> message flow and click the Flow Exerciser icon <img src="http://ot4i.github.io/ot4i.tutorials//dist/images/icons/iib/startFlowExerciser.png" alt> to start testing the flow. If your Toolkit is connected to multiple servers, you may be asked which one you would like to use. Select an Integration Server under the node which you prepared with the <code>mqsichangebluemixreporting</code> command earlier.
										
										</li>
									
										<li> Click the Send Message icon <img src="http://ot4i.github.io/ot4i.tutorials/dist/images/icons/iib/sendMessage.png" alt>, and choose the provided <b>ExampleInput</b> and click Send.
										
										</li>
									
										<li> Return to your web browser, refresh the page, and you should see log events have now started to populate the charts. If you still don't see any data then review your settings or look for any errors in your local event log, noting that there is a time filter set on the dashboard which by default will only show you events from the last 15 minutes (just in case you have let time slip by since sending in the data!)
										
										</li>
									
									
									</ol>
									
								
							
						</div>
							
					</div>
					
		    	</div>
		    	<div class="content" id="panel41">
		    		
		    		<div class="small-10 medium-10 large-10 columns divider">
					
				    	<div class="row content-details">
					      	<h4>Extend the basic IBM Integration Bus dashboard with your own customization</h4>
					        
						    
								<p> The instructions below demonstrate how you can customize a Kibana dashboard by adding your own vizualization to track a specific type of IBM Integration Bus log message: </p>
								
								
									
									<ol>
									
									
										<li> In <b>Kibana 4</b> click on <b>Visualize</b> and then <b>Vertical bar chart</b>.
										
										</li>
									
										<li> Select <b>From a saved search</b>, and then <b>IBM Log Events</b>.
										
										</li>
									
										<li> Click on <b>X-Axis</b> as the bucket type.
										
										</li>
									
										<li> Under <b>Aggregation</b>, select <b>Date Histogram</b>.
										
										</li>
									
										<li> Click on <b>Add sub-buckets</b>Split Bars.
										
										</li>
									
										<li> In the <b>Sub Aggregation</b> field select <b>Filters</b>.
										
										</li>
									
										<li> Enter <b>ibm_messageId:3051</b> into <b>Filter 1</b> and press the <b>Apply changes</b> (white triangle in a green background) button to update the chart to show data for message id 3051.
										
										</li>
									
										<li> Click on the <b>Save Visualize</b> (small disk icon on top right) to save the chart.
										
										</li>
									
										<li> Once the chart is saved, it can be added to the dashboard by clicking on the <b>Add Visualization</b> button which you will find back on the dashboard tab in the top right corner (circular icon with a plus sign).
										
										</li>
									
										<li> Select the new chart from the list and it will be added to the bottom of the dashboard. You can move and resize it, or replace an existing one in the dashboard.
										
										</li>
									
									
									</ol>
									
								
							
								<p> This tutorial has shown how to send log events from IBM Integration Bus to a Kibana dashboard in Bluemix, and create new charts in Kibana to track a particular log message type. </p>
								
							
						</div>
						
						<div class="row content-details"> 	
							<h4>Find out more</h4>
							<ul>
							
								
																
								<li> <a href="javascript:;" onclick="openHelpSystem('/com.ibm.etools.mft.doc/rt26110_.htm')" title="Knowledge Center link to Testing your message flow by using the Flow exerciser">Testing your message flow by using the Flow exerciser</a> </li>
							   	
							
							</ul>
						</div>
							
					</div>
					
					<div class="small-2 medium-2 large-2 columns">
					
					
					
					
					
					<h4 class="tkaction"><a href="javascript:;" onclick="cleanUp()" title="Clean up and remove any changes in your workspace made by the tutorial."> Clean Up <img class="icon-image" src="http://ot4i.github.io/iib-tutorials/images/icons/ibmdesign/close-cancel-error_128-red.png"></a></h4>
				    
					
				    </div>
					
				</div>	
			</div> <!-- tab-content -->
		</div> <!-- columns -->
	  </div> <!-- row --></body>
		<script src="http://ot4i.github.io/iib-tutorials/js/vendor/jquery.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/vendor/foundation.min.js"></script>
		<script src="http://ot4i.github.io/iib-tutorials/js/main.js"></script>
	</body>
<!-- body::End -->

</html>